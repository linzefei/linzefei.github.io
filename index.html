<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>3D Text Animation with Collision Detection</title>
	<style>
		canvas {
			display: block;
			margin: 0 auto;
			background-color: #000;
		}
	</style>
</head>

<body>
	<canvas id="scene"></canvas>
	<script>
		const canvas = document.getElementById('scene');
		const ctx = canvas.getContext('2d');
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;

		class Text3D {
			constructor(text, x, y, z, size, color) {
				this.text = text;
				this.x = x;
				this.y = y;
				this.z = z;
				this.size = size;
				this.color = color;
				this.vx = (Math.random() - 0.5) * 4;
				this.vy = (Math.random() - 0.5) * 4;
			}

			update() {
				this.x += this.vx;
				this.y += this.vy;
				if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
				if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
			}

			draw() {
				ctx.save();
				ctx.translate(this.x, this.y);
				ctx.scale(this.z / 100, this.z / 100);
				ctx.fillStyle = this.color;
				ctx.font = `${this.size * (100 / this.z)}px Arial`;
				ctx.textAlign = 'center';
				ctx.textBaseline = 'middle';
				ctx.fillText(this.text, 0, 0);
				ctx.restore();
			}

			collidesWith(other) {
				const halfSize = this.size / 2;
				const otherHalfSize = other.size / 2;
				const dx = this.x - other.x;
				const dy = this.y - other.y;
				const distance = Math.sqrt(dx * dx + dy * dy);
				return distance < (halfSize + otherHalfSize);
			}
		}

		const texts = [
			new Text3D('Hello', 100, 100, 50, 30, 'red'),
			new Text3D('Hello', 100, 100, 50, 30, 'red'),
			new Text3D('Hello', 100, 100, 50, 30, 'red'),
			new Text3D('Hello', 100, 100, 50, 30, 'red'),
			new Text3D('Hello', 100, 100, 50, 30, 'red'),
			new Text3D('World', 300, 200, 70, 30, 'green'),
			new Text3D('World', 300, 200, 70, 30, 'green'),
			new Text3D('World', 300, 200, 70, 30, 'green'),
			new Text3D('World', 300, 200, 70, 30, 'green'),
			new Text3D('World', 300, 200, 70, 30, 'green'),
			new Text3D('!', 500, 300, 60, 20, 'yellow')
		];

		function animate() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			texts.forEach((text, index) => {
				text.update();
				texts.forEach((other, otherIndex) => {
					if (index !== otherIndex && text.collidesWith(other)) {
						// 碰撞处理：改变颜色
						text.color = 'blue';
						other.color = 'blue';
					}
				});
				text.draw();
			});
			requestAnimationFrame(animate);
		}

		animate();
	</script>
</body>

</html>